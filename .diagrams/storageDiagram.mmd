%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#1a237e', 'primaryTextColor': '#ffffff', 'primaryBorderColor': '#000000', 'lineColor': '#000000', 'secondaryColor': '#0d47a1', 'tertiaryColor': '#1565c0'}}}%%
graph TD
    %% Style settings for better visibility
    classDef default fill:#f5f5f5,stroke:#333,stroke-width:2px,color:#000,font-weight:bold
    classDef folder fill:#1565c0,stroke:#0d47a1,stroke-width:2px,color:#fff,font-weight:bold
    classDef file fill:#4caf50,stroke:#2e7d32,stroke-width:1.5px,color:#fff
    classDef note fill:#f5f5f5,stroke:#666,stroke-width:1px,color:#000,font-weight:normal
    
    %% Storage Structure
    Storage[("📦 Storage Root")]
    
    %% Main Directories
    Users["📂 /users"]
    Chats["📂 /chats"]
    Projects["📂 /projects"]
    
    %% Connect to Storage
    Storage --> Users
    Storage --> Chats
    Storage --> Projects
    
    %% User Profile Structure
    subgraph UserProfile["👤 User Profile"]
        User1["📁 /users/{userId}"]
        ProfileImg["🖼️ {UUID}.jpg"]
        
        User1 --> ProfileImg
    end
    
    %% Chat Media Structure
    subgraph ChatMedia["💬 Chat Media"]
        Chat1["📁 /chats/{channelId}"]
        ChatFile1["📄 {UUID}.{ext}"]
        
        Chat1 --> ChatFile1
    end
    
    %% Project Files Structure
    subgraph ProjectFiles["📂 Project Files"]
        Project1["📁 /projects/{projectId}"]
        ProjFile1["📄 {UUID}.{ext}"]
        
        Project1 --> ProjFile1
    end
    
    %% Connect to main directories
    Users --> User1
    Chats --> Chat1
    Projects --> Project1
    
    %% Apply styles
    class Users,Chats,Projects,User1,Chat1,Project1 folder
    class ProfileImg,ChatFile1,ProjFile1 file
    
    %% Naming Convention
    Naming["📝 파일명 규칙"]
    Naming:::note
    Naming --> |"{UUID}"| UUID["고유 식별자 (UUID v4)"]
    Naming --> |".{ext}"| Ext["원본 파일 확장자 유지"]
    
    class UUID,Ext note
    
    %% Add some visual separation
    style Storage fill:#1a237e,stroke:#000,color:#fff,stroke-width:2px
    style UserProfile fill:#e3f2fd,stroke:#90caf9,stroke-width:1px
    style ChatMedia fill:#e8f5e9,stroke:#a5d6a7,stroke-width:1px
    style ProjectFiles fill:#fff3e0,stroke:#ffcc80,stroke-width:1px